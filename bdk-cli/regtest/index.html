

<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.79.0" />
    <meta name="description" content="The Bitcoin Dev Kit project aims to build a collection of tools and libraries that are designed to be a solid foundation for Bitcoin wallets.">
<meta name="author" content="Alekos Filini - @afilini">

    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
<link rel="manifest" href="/icons/site.webmanifest">
<link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

    <title>Regtest :: Bitcoin Dev Kit</title>

    
    <link href="/css/nucleus.css?1616537065" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1616537065" rel="stylesheet">
    <link href="/css/hybrid.css?1616537065" rel="stylesheet">
    <link href="/css/featherlight.min.css?1616537065" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1616537065" rel="stylesheet">
    <link href="/css/auto-complete.css?1616537065" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1616537065" rel="stylesheet">
    <link href="/css/theme.css?1616537065" rel="stylesheet">
    <link href="/css/hugo-theme.css?1616537065" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1616537065" rel="stylesheet">
    
    <link href="/css/style.css?1616537065" rel="stylesheet"><link href="/css/jsonview.css?1616537065" rel="stylesheet"><link href="/css/blog.css?1616537065" rel="stylesheet">

    <meta property="og:title" content="Regtest" />
<meta property="og:description" content="Running the bdk-cli tool in regtest requires having a local Electrum server set-up. There are two main implementations, electrs in Rust and ElectrumX in Python. Since the Rust toolchain is already required to use BDK, this page will focus mostly on the former.
Electrs can be installed by running:
cargo install --git https://github.com/romanz/electrs --bin electrs Just like before, this command will probably take a while to finish.
Once it&rsquo;s done, assuming you have a regtest bitcoind running in background, you can launch a new terminal and run the following command to actually start electrs:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bitcoindevkit.org/bdk-cli/regtest/" />
<meta property="og:image" content="https://bitcoindevkit.org/images/logo-wide.jpg"/>
<meta property="article:published_time" content="2020-04-29T00:19:34+02:00" />
<meta property="article:modified_time" content="2020-04-29T00:19:34+02:00" />

    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://bitcoindevkit.org/images/logo-wide.jpg"/>

<meta name="twitter:title" content="Regtest"/>
<meta name="twitter:description" content="Running the bdk-cli tool in regtest requires having a local Electrum server set-up. There are two main implementations, electrs in Rust and ElectrumX in Python. Since the Rust toolchain is already required to use BDK, this page will focus mostly on the former.
Electrs can be installed by running:
cargo install --git https://github.com/romanz/electrs --bin electrs Just like before, this command will probably take a while to finish.
Once it&rsquo;s done, assuming you have a regtest bitcoind running in background, you can launch a new terminal and run the following command to actually start electrs:"/>


    <script src="/js/jquery-3.3.1.min.js?1616537065"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/bdk-cli/regtest/">
    


<nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
    <img src="/images/logo.svg" alt="Bitcoin Dev Kit logo"/>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1616537065"></script>
<script type="text/javascript" src="/js/auto-complete.js?1616537065"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/bitcoindevkit.org\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1616537065"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/blog/" title="Blog" class="dd-item
        
        
        
        ">
      <a href="/blog/">
          <i class="fas fa-newspaper"></i> Blog
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/bdk-cli/" title="BDK CLI" class="dd-item
        parent
        
        
        ">
      <a href="/bdk-cli/">
          <i class="fas fa-terminal"></i> BDK CLI
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/bdk-cli/installation/" title="Installation" class="dd-item ">
        <a href="/bdk-cli/installation/">
        <b>1. </b>Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/bdk-cli/concept/" title="Concept" class="dd-item ">
        <a href="/bdk-cli/concept/">
        <b>2. </b>Concept
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/bdk-cli/interface/" title="Interface" class="dd-item ">
        <a href="/bdk-cli/interface/">
        <b>3. </b>Interface
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/bdk-cli/regtest/" title="Regtest" class="dd-item active">
        <a href="/bdk-cli/regtest/">
        <b>4. </b>Regtest
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/bdk-cli/compiler/" title="Compiler" class="dd-item ">
        <a href="/bdk-cli/compiler/">
        <b>5. </b>Compiler
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/bdk-cli/playground/" title="Playground" class="dd-item ">
        <a href="/bdk-cli/playground/">
        <b>6. </b>Playground
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/descriptors/" title="Descriptors" class="dd-item
        
        
        
        ">
      <a href="/descriptors/">
          <i class="fas fa-code"></i> Descriptors
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/supporters/" title="Supporters" class="dd-item
        
        
        
        ">
      <a href="/supporters/">
          <i class="fas fa-heart"></i> Supporters
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://docs.rs/bdk"><i class='fas fa-book-open'></i> Stable Docs</a>
              </li>
          
              <li>
                  <a class="padding" href="https://bitcoindevkit.org/docs-rs/bdk/nightly/latest/bdk"><i class='fas fa-tools'></i> Nightly Docs</a>
              </li>
          
              <li>
                  <a class="padding" href="https://bitcoindevkit.org/bdk-cli/playground"><i class='fas fa-magic'></i> Playground</a>
              </li>
          
              <li>
                  <a class="padding" href="https://twitter.com/intent/follow?screen_name=bitcoindevkit"><i style='font-size: 20px' class='fab fa-twitter-square'></i> Follow on Twitter</a>
              </li>
          
              <li>
                  <a class="padding" href="https://discord.gg/dstn4dQ"><i style='font-size: 20px' class='fab fa-discord'></i> Chat on Discord</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <script type="text/javascript" src="/js/github-buttons.js"></script>

<center>
    
    <a class="github-button" href="https://github.com/bitcoindevkit/bdk/subscription" data-icon="octicon-eye" data-show-count="true" aria-label="Watch bitcoindevkit/bdk on GitHub">Watch</a>
    <a class="github-button" href="https://github.com/bitcoindevkit/bdk" data-icon="octicon-star" data-show-count="true" aria-label="Star bitcoindevkit/bdk on GitHub">Star</a>
    <a class="github-button" href="https://github.com/bitcoindevkit/bdk/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork bitcoindevkit/bdk on GitHub">Fork</a>
</center>

<center>Built with <a href="https://gohugo.io/">Hugo</a></center>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/bitcoindevkit/bitcoindevkit.org/edit/master/content/bdk-cli/regtest.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Regtest
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#troubleshooting">Troubleshooting</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#bonus-docker">Bonus: Docker</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        



        </div>
        
        <div id="body-inner">
          
            
            <h1>
              
              Regtest
            </h1>
            
          

        


<p>Running the <code>bdk-cli</code> tool in regtest requires having a local Electrum server set-up. There are two main implementations, <a href="https://github.com/romanz/electrs"><code>electrs</code></a> in Rust and <a href="https://github.com/spesmilo/electrumx"><code>ElectrumX</code></a> in Python. Since the Rust toolchain is already required to
use BDK, this page will focus mostly on the former.</p>
<p>Electrs can be installed by running:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cargo install --git https://github.com/romanz/electrs --bin electrs
</code></pre></div><p>Just like before, this command will probably take a while to finish.</p>
<p>Once it&rsquo;s done, assuming you have a regtest bitcoind running in background, you can launch a new terminal and run the following command to actually start electrs:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">electrs -vv --timestamp --db-dir /tmp/electrs-db --electrum-rpc-addr<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;127.0.0.1:50001&#34;</span> --network<span style="color:#f92672">=</span>regtest --cookie-file<span style="color:#f92672">=</span>$HOME/.bitcoin/regtest/.cookie
</code></pre></div><p>on macOS you should change the cookie-file to <code>$HOME/Library/Application Support/Bitcoin/regtest/.cookie</code>.</p>
<p>This will start the Electrum server on port 50001. You can then add the <code>-n regtest -s 127.0.0.1:50001</code> to the <code>bdk-cli</code> commands to switch to the local regtest.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h4 id="stuck-with-wait-until-bitcoind-is-synced-ie-initialblockdownload--false">Stuck with &ldquo;<em>wait until bitcoind is synced (i.e. initialblockdownload = false)</em>&rdquo;</h4>
<p>Just generate a few blocks with <code>bitcoin-cli generatetoaddress 1 &lt;address&gt;</code></p>
<h2 id="bonus-docker">Bonus: Docker</h2>
<p>If you have already installed Docker on your machine, you can also use 🍣 <a href="https://github.com/vulpemventures/nigiri">Nigiri CLI</a> to spin-up a complete development environment in <code>regtest</code> that includes a <code>bitcoin</code> node, an <code>electrs</code> explorer and the <a href="https://github.com/blockstream/esplora"><code>esplora</code></a> web-app to visualize blocks and transactions in the browser.</p>
<p>Install 🍣 Nigiri</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl https://getnigiri.vulpem.com | bash
</code></pre></div><p>Start Docker daemon and run Nigiri box</p>
<pre><code>$ nigiri start
</code></pre><p>This will start electrum RPC interface on port <code>51401</code>, the REST interface on <code>3000</code> and the esplora UI on <code>5000</code> (You can visit with the browser and look for blocks, addresses and transactions)</p>
<p>You can then add the <code>-n regtest -s 127.0.0.1:51401</code> to the <code>bdk-cli</code> commands to switch to the local regtest.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1616537065"></script>
    <script src="/js/perfect-scrollbar.min.js?1616537065"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1616537065"></script>
    <script src="/js/jquery.sticky.js?1616537065"></script>
    <script src="/js/featherlight.min.js?1616537065"></script>
    <script src="/js/highlight.pack.js?1616537065"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1616537065"></script>
    <script src="/js/learn.js?1616537065"></script>
    <script src="/js/hugo-learn.js?1616537065"></script>
    
        
            <script src="/mermaid/mermaid.js?1616537065"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    <script type="text/javascript" src="/js/jsonview.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/main.js" charset="utf-8"></script>

  </body>
</html>

